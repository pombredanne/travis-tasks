<!DOCTYPE HTML>
<html>
  <head>
    <style type="text/css" media="screen">
      #body {
        font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
        font-size: 16px;
        color: #808080;
        width: 570px;
        margin: 0 auto;
      }

      .grey {
        color: #808080;
      }

      a {
        text-decoration: underline;
      }

      table, tr, td {
        padding: 0px;
        border: 0px;
      }

      table {
        width: 100%;
      }

      #build {
        border-radius: 5px;
        padding: 0px;
        width: 570px;
        font-size: 13px;
      }

      .repository {
        color: #606060;
        font-size: 20px;
        margin-bottom: 15px;
        margin-top: 15px;
      }

      .repository td {
        vertical-align: middle;
      }

      .repository td img {
        vertical-align: middle;
        width: 40px;
        height: 40px;
      }

      .repository td span {
        vertical-align: middle;
        margin-left: 3px;
      }

      .repository td span a {
        color: #606060;
      }

      #build thead td {
        padding: 0px 20px 0px 0px;
        vertical-align: middle;
      }

      #build thead td:first-child {
        text-align: center;
        vertical-align: middle;
        padding-top: 5px;
      }

      #build.failure thead td.build-message a {
        color: #df192a;
      }

      #build.success thead td.build-message a {
        color: #32a32d;
      }

      #build.error thead td.build-message a {
        color: #707070;
      }

      #build thead tr {
        font-weight: 700;
        font-size: 18px;
      }

      #build.failure thead tr {
        background-color: #fdcdce;
        color: #df192a;
      }

      #build.success thead tr {
        background-color: #baecb7;
        color: #32a32d;
      }

      #build.error thead tr {
        background-color: #cccccc;
        color: #707070;
      }

      #build thead td {
        border-top: 1px solid #808080;
        border-bottom: 1px solid #adadad;
      }

      #build thead td:first-child {
        border-left: 1px solid #606060;
        border-top-left-radius: 5px;
      }

      #build thead td:last-child {
        border-right: 1px solid #606060;
        border-top-right-radius: 5px;
      }

      #build .status-image {
        width: 25px;
        background-size: 25px;
        height: 30px;
        margin-left: 15px;
        margin-top: 0px;
        vertical-align: middle;
      }

      #build tbody td {
        padding: 10px 20px 10px 0px;
        height: 20px;
      }

      #build tbody td:first-child {
        border-left: 1px solid #adadad;
      }

      #build tbody td:last-child {
        border-right: 1px solid #adadad;
      }

      #build tbody {
        margin-bottom: 40px;
      }

      #build tbody tr:first-child td {
        padding-top: 20px;
        padding-bottom: 5px;
      }

      #build tbody tr:last-child td:last-child {
        padding-bottom: 20px;
        padding-top: 0px;
        border-bottom: 1px solid #adadad;
        border-bottom-right-radius: 5px;
      }

      #build tbody tr:last-child td:first-child {
        border-bottom-left-radius: 5px;
        border-bottom: 1px solid #adadad;
      }

      #build table {
        border-spacing: 0;
      }

      #build a {
        text-decoration: none;
        font-weight: bold;
        color: #57769d;
      }

      #build td.profile-image:first-child {
        text-align: center;
      }

      #build td:first-child {
        width: 50px;
        padding: 0px;
      }

      #build .build-message span {
        display: inline-block;
        margin-top: 12px;
        vertical-align: middle;
      }

      #build .build-message a {
        text-decoration: underline;
      }

      .time {
        font-weight: normal;
        font-size: 12px;
        vertical-align: middle;
      }

      .time div {
        vertical-align: middle;
      }

      #build .time .stop-watch {
        height: 20px;
        width: 20px;
        padding: 0px;
        background-size: 20px;
        display: inline-block;
      }

      #build .time .stop-watch {
        width: 20px;
        height: 20px;
      }

      .time span {
        vertical-align: middle;
      }

      .footer {
        background-color: #e9e6e7;
        border-radius: 5px;
        border: 1px solid #adadad;
        padding: 10px;
        margin-top: 20px;
        font-size: 12px;
        width: 570px;
        line-height: 16px;
      }

      .footnote {
        margin-top: 20px;
        border-radius: 5px;
        border: 1px solid #adadad;
        font-size: 12px;
        padding: 10px 20px;
        width: 528px;
      }

      .footnote strong {
        font-size: 14px;
      }

      .footnote p {
        margin-top: 0px;
        margin-bottom: 5px;
      }

      .footnote p:last-child {
        margin-bottom: 5px;
      }

      .footnote a, .footer a {
        color: #606060;
      }

      #mascot {
        float: right;
        margin-top: 10px;
        margin-right: 20px;
      }

      .left {
        float: left;
      }

      .right {
        float: right;
      }

      .tiny-footer {
        font-size: 12px;
        text-align: center;
        vertical-align: middle;
        height: 20px;
        width: 570px;
      }

      .tiny-footer img {
        vertical-align: middle;
      }

      .tiny-footer span {
        vertical-align: middle;
      }

      .tiny-footer p {
        margin-top: 10px;
      }

      #broadcasts {
        width: 528px;
        padding: 10px 20px;
        border: 1px solid #adadad;
        border-radius: 5px;
        margin-top: 10px;
        font-size: 12px;
        margin-bottom: 0px;
        background-color: #FBFddc;
        margin-top: 20px;
      }

      #broadcasts p {
        margin-top: 5px;
        margin-bottom: 0px;
      }
    </style>
  </head>
  <body>
    <div id="body">
      <table class="repository" background="" style="">
        <tr style="">
          <td><img src="<%= @repository.owner_avatar_url %>?s=40&d=<%= CGI.escape("https://#{Travis.config.assets.host}/images/mailer/mascot-avatar-40px.png") %>"/> <span><strong><%= link_to @repository.slug.gsub(/\//, " / "), "https://#{Travis.config.host}/#{@repository.slug}" -%></strong> (<%= link_to @commit.branch, "#{Travis.config.github.url}/#{@repository.slug}/tree/#{@commit.branch}" -%>)</span></td>
        </tr>
      </table>
      <div id="build" class="<%= build_email_css_class(@build) %>">
        <div class="content">
          <table>
            <thead>
              <tr>
                <td><div class="status-image"><img src="https://<%= Travis.config.assets.host -%>/images/mailer/<%= build_image_extension(@build) %>.png" width="25" height="25"></div></td>
                <td class="build-message"><span><%= link_to @result_message.email, repository_build_url(slug: @repository.slug, id: @build.id) %></span><img src="https://<%= Travis.config.assets.host -%>/images/mailer/arrow-<%= build_image_extension(@build) -%>.png" style="float: right;" height="45"></td>
                <td align="right" class="time"><div class="stop-watch"><img src="https://<%= Travis.config.assets.host -%>/images/mailer/stopwatch-<%= build_image_extension(@build) %>.png" width="20" height="20"></div> <span><%= duration_in_words(@build.started_at, @build.finished_at) %></span></td>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="profile-image"><img src="https://secure.gravatar.com/avatar/<%= Digest::MD5.hexdigest(@commit.author_email) %>?s=15&d=<%= CGI.escape("https://#{Travis.config.assets.host}/images/mailer/mascot-avatar-15px.png") %>"></td>
                <td class="grey"><strong><%= @commit.author_name %></strong></td>
                <td align="right" class="grey"><a href="<%= Travis.config.github.url %>/<%= @repository.slug -%>/commit/<%= @commit.sha %>"><%= @commit.sha[0..6] %></a> <%= link_to "Changeset â†’", @commit.compare_url %></a></td>
              </tr>
              <tr>
                <td>&nbsp;</td>
                <td colspan="2" class="grey"><%= html_escape(@commit.message).gsub("\n", "<br/>").html_safe %></td>
              </tr>
              </tbody>
          </table>
        </div>
      </div>

      <% if @broadcasts.any? -%>
      <div id="broadcasts">
        <span class="grey">
          <b>System message:</b>
          <% @broadcasts.each do |broadcast| -%>
          <p>
            <%= broadcast.message.html_safe -%>
          </p>
          <% end -%>
        </span>
      </div>
      <% end -%>

      <div style="padding-top: 10px; width: 570px">
        <span>
          <div class="section footnote">
            <p class="grey"><strong>Want to know about upcoming build environment updates?</strong></p>
            <p class="grey">Would you like to stay up-to-date with the upcoming Travis CI build environment updates?
              We set up a mailing list for you!
              Sign up <a href="http://eepurl.com/9OCsP">here</a>.
            </p>
          </div>
        </span>
      </div>

      <table border="0" class="footer">
        <tr>
          <td>
            <img src="https://<%= Travis.config.assets.host -%>/images/mailer/email-footer-travis-logo.png" style="width: 50px; height: 50px;" />
          </td>
          <td style="" class="grey">
            <a href="https://docs.travis-ci.com">Documentation</a> about Travis CI<br/>
            Need help? Mail <a href="mailto:support@travis-ci.com">support</a>!<br/>
            Choose who receives these build notification emails in your <a href="https://docs.travis-ci.com/user/notifications">configuration file</a>.
          </td>
        </tr>
      </table>

      <% if Travis.config.build_email_footer? -%>
      <div style="padding-top: 10px; width: 570px">
        <img id="mascot" src="https://<%= Travis.config.assets.host %>/images/mailer/travis-mascot.png" width="80" >
        <div class="section footnote">
          <p class="grey"><strong>Would you like to test your private code?</strong></p>
          <p class="grey"><a href="https://travis-ci.com?utm_source=build_email_footer&utm_campaign=travis-ci.org&utm_medium=email">Travis CI for Private Projects</a> could be your new best friend!</p>
        </div>
      </div>
      <% end -%>

    </div>
    <script type="application/ld+json">
    {
      "@context": "http://schema.org",
      "@type": "EmailMessage",
      "action": {
        "@type": "ViewAction",
        "url": "<%= repository_build_url(slug: @repository.slug, id: @build.id) %>",
        "name": "View Build"
      },
      "description": "View Build #<%= @build.number %> on Travis CI"
    }
    </script>
</body>
</html>
